---
import Card from "../components/Card.astro";

const projects = await Astro.glob("../projects/*.md");
---

<section class="projects py-8">
  <h2 class="font-bold text-4xl mb-4" id="projects">Projects</h2>
  <div class="md:grid grid-cols-2 gap-4 sm:flex flex-col">
    {
      projects.map((project) => (
        <Card>
          <a href={`/${project.frontmatter.slug}`}>
            <div class="project-overlay">
              <div class="project-content h-full w-full flex flex-col items-start">
                <h3 class="project-title text-2xl font-bold py-4">
                  {project.frontmatter.title}
                </h3>
                <p class="project-desc text-lg py-2">
                  {project.frontmatter.description}
                </p>
              </div>
            </div>
            <img
              class="project-image"
              src={project.frontmatter.cover_image}
              alt={project.frontmatter.cover_alt}
            />
          </a>
        </Card>
      ))
    }
  </div>
</section>

<style>
  .project-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100%;
    padding: 1rem;
    background-color: rgba(0, 0, 0, 0.6);
    color: white;
  }

  .project-image {
    width: 100%;
    height: auto;
  }

  .project-desc {
    opacity: 0;
    transition: opacity 0.5s ease;
  }

  .project-overlay:hover .project-desc {
    opacity: 1;
  }

  @media only screen and (max-width: 768px) {
    .project-overlay .project-desc {
      opacity: 1;
    }
  }
</style>
